import React, { useState, useMemo, useEffect } from 'react';
import { Search, BookOpen, Sparkles, Copy, Check } from 'lucide-react';

const ArabicProverbsApp = () => {
  const [searchTerm, setSearchTerm] = useState('');
  const [copied, setCopied] = useState(null);
  const [highlightedIndex, setHighlightedIndex] = useState(null);

  const proverbs = [
    "ุญูุช ููุงุช ููุช ูุฃูู ูู ููุฑูุน",
    "ุญุณุจู ูู ุดุฑ ุณูุงุนู",
    "ุญูุธุง ูู ูุงูุฆู",
    "ุญุฏูุซ ุฎุฑุงูุฉ",
    "ุงุญูุจ ุญูุจุง ูู ุดุทุฑู",
    "ุญุฐู ุงููุฐุฉ ุจุงููุฐุฉ",
    "ุญููู ุฃุตู ูุฃุฐูู ุบูุฑ ุตูุงุก",
    "ุญูุฑ ูู ูุญุงุฑุฉ",
    "ุญูุจ ุงูุฏูุฑ ุฃุดุทุฑู",
    "ุญุณุจู ูู ุบูู ุดุจุน ูุฑู",
    "ุญุณุจู ูู ุงูููุงุฏุฉ ูุง ุฃุญุงู ุจุงูุนูู",
    "ุญุจูู ุนูู ุบุงุฑุจู",
    "ุญุจู ุงูุดูุก ูุนูู ููุตู",
    "ุญุจูุจ ุฅูู ุนุจุฏ ูู ูุฏู",
    "ุญุณู ูู ูู ุนูู ูุง ุชูุฏ",
    "ุญุชูู ูุง ุฎูุฑ ูู ุณูู ุฒูุฎ",
    "ุญุฑุฉ ุชุญุช ูุฑุฉ",
    "ุงูุญุฑุจ ุฎุฏุนุฉ",
    "ุงูุญุฏูุซ ุฐู ุดุฌูู",
    "ุญูุชุง ุชูุงูุณ",
    "ุญุฏุณ ููู ุจูุทูุฆุฉ ุงูุฑุถู",
    "ุญุฑุงูู ูุฑูุจ ูู ูุง ุญูุงู ูู",
    "ุงูุญุณู ุฃุญูุฑ",
    "ุญุงููุฉ ูุฎุชุถุจุฉ",
    "ุญููู ุงููุฑุก ูุงุตูู",
    "ุญุจ ุฅูู ุนุจุฏ ูุญูุฏู",
    "ุงุญูู ุงูุนุจุฏ ุนูู ูุฑุณ ูุฅู ููู ููู ูุฅู ุนุงุด ููู",
    "ุญุฏุซูู ูุงู ุฅูู ูู",
    "ุญูููุง ูู ุธูุฑู ุฅูู ุจุทูู",
    "ุฃุญุดู ูุชุฑูุซูู",
    "ุฃุญูุจุช ูุงูุชู ุฃู ุฃุฌูุจุช",
    "ุฃุญุงุฏูุซ ุงูุถุจุน ุงุณุชูุง",
    "ุฃุญุจ ุฃูู ุงูููุจ ุฅููู ุงูุธุงุนู",
    "ุฃุญุจ ุฃูู ุงูููุจ ุฅููู ุฎุงููู",
    "ุญููุช ุจู ุนููุงุก ูุบุฑุจ",
    "ุญุฏุฃ ุญุฏุฃ ูุฑุงุกู ุจูุฏูู",
    "ุญูุซ ูุง ุณุงุกู ูุงูุนููู ููู",
    "ุญู ุจูุงุฏ ุถุจู ูููู",
    "ุญูุฏุง ุฅุฐุง ุงุณุชุบููุช ูุงู ุฃูุฑู",
    "ุญุฏ ุฅูุงู ูุงูุตุฑุงุฏ ูุบุณู",
    "ุญูุธูุฉ ุงูุฌุฑุงุญ ููุณุช ููุนุจ",
    "ุญูุจู ูู ูุนุชู ุจุงูุณูุงุฑ",
    "ุฃุญุจุถ ููู ูุฏุนูู ูุฎุทุง",
    "ุญุฌุง ุจุจูุช ูุจุชุบู ุฒุงุฏ ุงูุณูุฑ",
    "ุญูุถุฉ ุญุณูุงุก ููุณุช ุชููู",
    "ุฃุญูู ููุทุฎ ุงููุงุก",
    "ุงุญุชูุจ ูุฑูู",
    "ุญุชู ูุฑุฌุน ุงูุณูู ุนูู ูููู",
    "ุญุชู ูุฑุฌุน ุงูุฏุฑ ูู ุงูุถุฑุน",
    "ุญูู ููู ูููู ุฃูุฏุงุฑ ุงูุญููุ",
    "ุญุงูุธ ุนูู ุงูุตุฏูู ููู ูู ุงูุญุฑูู",
    "ุฃุญู ุงูุฎูู ุจุงูุฑูุถ ุงููุนุงุฑ",
    "ุงุญุชุฑุณ ูู ุงูุนูู ููุงููู ููู ุฃูู ุนููู ูู ุงููุณุงู",
    "ุญู ุนูู ูุงุธุนู",
    "ุฃุญุงุฏูุซ ุงูุตู ุฅุฐุง ุณูุฑูุง",
    "ุฃุญุงุฏูุซ ุทุณู ูุฃุญูุงููุง",
    "ุญุงู ุงูุฃุฌู ุฏูู ุงูุฃูู",
    "ุญุจุฐุง ูุทุฃุฉ ุงูููู",
    "ุญูููุง ูู ุนุฌุฒ ุฅูู ุบุงุฑุจ",
    "ุญูู ุชูููู ุชุฏุฑูู",
    "ุฃุญูู ุจูุบ",
    "ุงูุญุฒู ุญูุธ ูุง ูููุช ูุชุฑู ูุง ูููุช",
    "ุญุจูุจ ุฌุงุก ุนูู ูุงูุฉ",
    "ุญูู ุงูุฏููู ููุง ุชุฒุจู",
    "ุงูุญูู ุฃุถุฑุนุชูู ูู",
    "ุญูู ุงูุตููุงู ุงูุฒูุฒูุฉ",
    "ุงูุญุฑุจ ุบุดูู",
    "ุงูุญุฐุฑ ูุจู ุฅุฑุณุงู ุงูุณูู",
    "ุญูุณ ูุดู ููุณู",
    "ุงุญูุธ ูุง ูู ุงููุนุงุก ุจุดุฏ ุงูููุงุก"
  ];

  const filteredProverbs = useMemo(() => {
    if (!searchTerm.trim()) return [];
    return proverbs.filter(proverb => 
      proverb.includes(searchTerm.trim())
    );
  }, [searchTerm]);

  const handleCopy = (proverb, index) => {
    navigator.clipboard.writeText(proverb);
    setCopied(index);
    setTimeout(() => setCopied(null), 2000);
  };

  const highlightText = (text, search) => {
    if (!search.trim()) return text;
    const parts = text.split(new RegExp(`(${search})`, 'gi'));
    return parts.map((part, i) => 
      part.toLowerCase() === search.toLowerCase() 
        ? <span key={i} className="bg-yellow-300 text-gray-900 rounded px-1">{part}</span>
        : part
    );
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100" dir="rtl">
      {/* Header */}
      <header className="bg-gradient-to-l from-amber-600 to-orange-600 text-white shadow-2xl">
        <div className="max-w-6xl mx-auto px-4 py-8">
          <div className="flex items-center justify-center gap-3 mb-4">
            <BookOpen className="w-10 h-10" />
            <h1 className="text-4xl font-bold">ูููุฒ ุงูุฃูุซุงู ุงูุนุฑุจูุฉ</h1>
            <Sparkles className="w-8 h-8" />
          </div>
          <p className="text-center text-amber-100 text-lg">
            ุงูุชุดู ุญููุฉ ุงูุฃุฌุฏุงุฏ ูู {proverbs.length} ูุซู ุนุฑุจู ุฃุตูู
          </p>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-6xl mx-auto px-4 py-8">
        {/* Search Box */}
        <div className="mb-8">
          <div className="relative">
            <Search className="absolute right-4 top-1/2 transform -translate-y-1/2 text-amber-600 w-6 h-6" />
            <input
              type="text"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              placeholder="ุงุจุญุซ ูู ุงูุฃูุซุงู..."
              className="w-full pr-14 pl-6 py-4 text-xl rounded-2xl border-2 border-amber-300 focus:border-amber-500 focus:ring-4 focus:ring-amber-200 outline-none transition-all shadow-lg bg-white"
            />
          </div>
          
          {/* Results Count */}
          <div className="mt-4 text-center">
            {searchTerm.trim() ? (
              <span className="inline-block bg-white px-6 py-2 rounded-full shadow-md text-gray-700 font-semibold">
                ูุชุงุฆุฌ ุงูุจุญุซ: {filteredProverbs.length} ูู {proverbs.length}
              </span>
            ) : (
              <span className="inline-block bg-amber-100 px-6 py-3 rounded-full shadow-md text-amber-800 font-semibold text-lg">
                ุงุจุฏุฃ ุจุงููุชุงุจุฉ ููุจุญุซ ูู {proverbs.length} ูุซู ุนุฑุจู
              </span>
            )}
          </div>
        </div>

        {/* Proverbs Grid */}
        {searchTerm.trim() && filteredProverbs.length > 0 ? (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {filteredProverbs.map((proverb, index) => (
              <div
                key={index}
                className="group bg-white rounded-xl p-6 shadow-md hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-amber-400 cursor-pointer"
                onMouseEnter={() => setHighlightedIndex(index)}
                onMouseLeave={() => setHighlightedIndex(null)}
              >
                <div className="flex items-start justify-between gap-4">
                  <div className="flex-1">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 text-white rounded-full flex items-center justify-center font-bold shadow-md">
                        {index + 1}
                      </span>
                      <div className="w-full h-0.5 bg-gradient-to-l from-amber-300 to-transparent"></div>
                    </div>
                    <p className="text-xl leading-relaxed text-gray-800 font-semibold">
                      {highlightText(proverb, searchTerm)}
                    </p>
                  </div>
                  
                  <button
                    onClick={() => handleCopy(proverb, index)}
                    className="flex-shrink-0 p-2 rounded-lg hover:bg-amber-100 transition-colors"
                    title="ูุณุฎ"
                  >
                    {copied === index ? (
                      <Check className="w-5 h-5 text-green-600" />
                    ) : (
                      <Copy className="w-5 h-5 text-gray-400 group-hover:text-amber-600" />
                    )}
                  </button>
                </div>
              </div>
            ))}
          </div>
        ) : searchTerm.trim() ? (
          <div className="text-center py-16">
            <div className="bg-white rounded-2xl shadow-xl p-12 max-w-md mx-auto">
              <Search className="w-20 h-20 text-gray-300 mx-auto mb-4" />
              <h3 className="text-2xl font-bold text-gray-700 mb-2">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</h3>
              <p className="text-gray-500">ุฌุฑุจ ุงูุจุญุซ ุจูููุงุช ุฃุฎุฑู</p>
            </div>
          </div>
        ) : (
          <div className="text-center py-16">
            <div className="bg-gradient-to-br from-white to-amber-50 rounded-2xl shadow-xl p-12 max-w-2xl mx-auto border-2 border-amber-200">
              <BookOpen className="w-24 h-24 text-amber-500 mx-auto mb-6" />
              <h3 className="text-3xl font-bold text-gray-800 mb-4">ูุฑุญุจุงู ุจู ูู ูููุฒ ุงูุฃูุซุงู</h3>
              <p className="text-xl text-gray-600 mb-6">
                ุงุณุชุฎุฏู ูุฑุจุน ุงูุจุญุซ ุฃุนูุงู ููุนุซูุฑ ุนูู ุงูุฃูุซุงู ุงูุนุฑุจูุฉ
              </p>
              <div className="bg-amber-100 rounded-xl p-6 border-r-4 border-amber-500">
                <p className="text-gray-700 text-lg">
                  ๐ก <strong>ูุตูุญุฉ:</strong> ููููู ุงูุจุญุซ ุจุฃู ูููุฉ ุฃู ุฌุฒุก ูู ุงููุซู
                </p>
              </div>
            </div>
          </div>
        )}
      </main>

      {/* Footer */}
      <footer className="bg-gradient-to-l from-amber-600 to-orange-600 text-white mt-16 py-8">
        <div className="max-w-6xl mx-auto px-4 text-center">
          <p className="text-lg mb-2">
            ูู ุงูุฃูุซุงู ุงูุนุฑุจูุฉ ุงููุฏููุฉ โข ุชุฑุงุซ ุนุฑุจู ุฃุตูู
          </p>
          <p className="text-amber-100 text-sm">
            ูุฌููุนุฉ ูู ุงูุฃูุซุงู ุงูุนุฑุจูุฉ ุงูุชู ุชุญูู ุญููุฉ ุงูุฃุฌุฏุงุฏ ูุชุฌุงุฑุจูู
          </p>
        </div>
      </footer>
    </div>
  );
};

export default ArabicProverbsApp;
